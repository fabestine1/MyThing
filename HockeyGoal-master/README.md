# System Design


# 1. Хардуерна платформа

## 1.1 Микроконтролер
За проекта се използва един от най-популярните микроконтролери - Arduino Uno. 
Базирана на микроконтролерът Microchip ATmega328P, платката е оборудвана с цифрови и аналогови входове / изходи, 
които могат да бъдат свързани с различни разширителни платки и сензори. 
Контролерът разполага с 14 цифрови и 6 аналогови пина и е програмируем чрез използването на интегрирана среда
за разработка Arduino IDE и USB кабел тип B. Контролерът ATmega328 на Arduino Uno идва предварително програмиран с буутлоудър,
който позволява качването на нов код в Ардуиното без нужда от използване на външен хардуерен програматор. 
## 1.2 Архитектура
Архитектурата на Ардуино е базирана на микроконтролери Atmel Atmega, където като език за програмиране се използва AVR. Голяма част от езика Arduino е написан с AVR константи и функции
## 1.3 Сензори
Към платката се свързва само един вид сензор - Infrared Proximity Sensor, чрез който се засича дали шайбата е преминала по голлинията или не. Сензорите се свързват към платката чрез GPIO интерфейс. Освен сензорите по GPIO е вързан и диод, който излъчва 5 секунди след като е вкаран гол.


# 2. Софтуерна платформа

## 2.1 Интегрирана среда за разработка
За разработването на кодът за проекта е избрана официалната интегрирана среда за разработка - Arduino IDE, която се използва за писане на кода и качването му на Ардуиното.

## 2.2 Език за програмиране
За език за програмиране  в проекта се използва Arduino language, който на практика се свежда до  C/С++ чрез използването на компилатора avr-g++. 

## 2.3 Операционна система
За проекта не се изисква специфична операционна система. Arduino IDE върви както под Windows, така и под Linux базираните операционни системи. За микроконтролера пък не ни е нужна операционна система, а само bootloader, който си идва включен със самото Ардуино.

## 2.4 Софтуерни библиотеки
В проекта се използва само една външна библиотека - NewPing, която се грижи за улесняване на работата с ултразвуковите сензори (в конкретния случай - Ултразвуков сензор HC-SR04).



# 3.  Static View

Програмната логика получава информация от сензорите за разстояние, от която преценява дали има гол или няма. Ако има гол се променя нивото на диода, който свети 5 секунди преди да започне устройството пак да следи дали има гол. Ако няма гол, устройството се връща в начална позиция и започва да изпълнява същия цикъл. Тази логика е показана на Фиг. 3.2, а static view-то - на Фиг. 3.1
